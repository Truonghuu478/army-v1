<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Army Battle Simulation</title>
    <link rel="stylesheet" href="style.css">
    <script src="js/lib/howler.min.js"></script>
    <style>
        .btn-sm {
            background: #333;
            border: 1px solid #555;
            color: #ccc;
            padding: 2px 8px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .btn-sm.active {
            background: #4488FF;
            color: white;
            border-color: #4488FF;
        }
    </style>
    <script>
        function setActive(btn) {
            // Remove active from siblings
            const siblings = btn.parentElement.children;
            for (let s of siblings) {
                if (s.tagName === 'BUTTON') s.classList.remove('active');
            }
            btn.classList.add('active');
        }
    </script>
</head>

<body>
    <div id="setup-screen" class="screen active">
        <h1>ARMY BATTLE SETUP</h1>
        <div class="setup-form">
            <!-- <div class="army-input">
                <label for="red-size">RED ARMY SIZE:</label>
                <input type="number" id="red-size" min="1" value="20">
            </div>
            <div class="army-input">
                <label for="blue-size">BLUE ARMY SIZE:</label>
                <input type="number" id="blue-size" min="1" value="20">
            </div> -->
            <!-- SETTINGS (Moved here) -->
            <div class="settings-bar"
                style="display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; background: rgba(0,0,0,0.5); padding: 10px; border-radius: 5px;">
                <div class="difficulty-control">
                    <span style="color:#aaa; font-weight:bold; font-size:0.8rem; margin-right:5px;">DIFFICULTY:</span>
                    <button class="btn-sm" onclick="game.setDifficulty('NORMAL'); setActive(this)">NORMAL</button>
                    <button class="btn-sm" onclick="game.setDifficulty('HARD'); setActive(this)"
                        style="color:#ffaa00; border-color:#ffaa00;">HARD</button>
                    <button class="btn-sm active" onclick="game.setDifficulty('EXTREME'); setActive(this)"
                        style="color:#ff4444; border-color:#ff4444;">EXTREME</button>
                </div>
                <div class="gold-toggle">
                    <label style="color:#fff; font-size:0.8rem; cursor:pointer; display:flex; align-items:center;">
                        <input type="checkbox" onchange="game.setInfiniteGold(this.checked)" style="margin-right:5px;">
                        INFINITE GOLD
                    </label>
                </div>
            </div>

            <button id="start-btn" class="btn-primary">START BATTLE</button>
        </div>
    </div>

    <div id="battle-screen" class="screen">
        <div class="battle-ui">
            <div class="stats-bar">
                <div class="team-stats red-team">
                    <span class="team-name">RED BASE</span>
                    <span class="unit-count" id="red-count">0</span>
                </div>
                <!-- GOLD DISPLAY -->
                <div class="gold-info">
                    <span id="gold-display" style="color: gold; font-size: 1.5rem; font-weight: bold;">GOLD: 100</span>
                </div>
                <div class="team-stats blue-team">
                    <span class="team-name">BLUE BASE</span>
                    <span class="unit-count" id="blue-count">0</span>
                </div>
            </div>

            <div id="battlefield-container">
                <canvas id="battlefield" width="1200" height="700"></canvas>
            </div>

            <!-- SETTINGS (Speed Only) -->
            <div class="settings-bar"
                style="display: flex; gap: 20px; align-items: center; justify-content: center; margin-bottom: 10px; background: rgba(0,0,0,0.5); padding: 5px; border-radius: 5px;">
                <div class="speed-control">
                    <span style="color:#aaa; font-weight:bold; font-size:0.8rem; margin-right:5px;">SPEED:</span>
                    <button class="btn-sm active" onclick="game.setSpeed(1); setActive(this)">x1</button>
                    <button class="btn-sm" onclick="game.setSpeed(2); setActive(this)">x2</button>
                    <button class="btn-sm" onclick="game.setSpeed(4); setActive(this)">x4</button>
                </div>
            </div>

            <div class="controls">
                <div class="spawn-selector" style="display: flex; gap: 10px; justify-content: center; width: 100%;">
                    <button class="spawn-btn" onclick="game.buyUnit('infantry')">
                        INFANTRY <br><span style="color:gold; font-size:0.8rem;">$15</span>
                    </button>
                    <button class="spawn-btn" onclick="game.buyUnit('tank')">
                        TANK <br><span style="color:gold; font-size:0.8rem;">$100</span>
                    </button>
                    <button class="spawn-btn" onclick="game.buyUnit('artillery')">
                        ARTILLERY <br><span style="color:gold; font-size:0.8rem;">$250</span>
                    </button>
                    <button class="spawn-btn" onclick="game.buyTurret()" style="border-color: #44aa44;">
                        TURRET <br><span style="color:gold; font-size:0.8rem;">$200</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="victory-screen" class="screen">
        <div class="victory-overlay">
            <h2 id="winner-text">VICTORY: RED</h2>
            <button id="restart-btn" class="btn-primary">RESTART BATTLE</button>
        </div>
    </div>

    <script src="js/constants.js"></script>
    <script src="js/SoundManager.js"></script>
    <script src="js/Unit.js"></script>
    <script src="js/Turret.js"></script>
    <script src="js/Projectile.js"></script>
    <script src="js/Base.js"></script>
    <script src="js/Battlefield.js"></script>
    <script src="js/Game.js"></script>
    <script src="js/main.js"></script>
</body>

</html>